(this.webpackJsonpcovid19india=this.webpackJsonpcovid19india||[]).push([[23],{119:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(81),a=r(143),i=r(0),c=function(t){var e=Object(i.useState)(null),r=Object(n.a)(e,2),c=r[0],o=r[1];return Object(i.useEffect)((function(){var e=t.current,r=new a.a((function(t,e){t.forEach((function(t,e){o(t.contentRect)}))}));return r.observe(e),function(){r.unobserve(e)}}),[t]),c}},251:function(t,e,r){"use strict";r.r(e);var n=r(108),a=r(137),i=r.n(a),c=r(177),o=r(7),s=r(119),l=r(31),u=r(168),f=r(246),d=r(109),p=r(232),m=r(220),b=r(238),v=r(216),h=r(120),j=r(167),g=r(114),O=r(214),k=r(0),E=r.n(k),x=r(249);var y=function(t){t.data;var e=t.mapViz,r=t.mapScale,n=t.statistic,a=Object(x.a)().t,i=Object(k.useRef)(null),c=Object(k.useRef)(),y=Object(s.a)(c);return Object(k.useEffect)((function(){var t=Object(O.a)(i.current),s=y||c.current.getBoundingClientRect(),k=s.width,E=s.height;if(!k||!E){var x=c.current.getBoundingClientRect();k=x.width,E=x.height}if(k&&E)if(e===o.k.BUBBLES){var A=t.transition().duration(o.b);t.select(".ramp").transition(A).attr("opacity",0).attr("xlink:href",null),t.select(".bars").selectAll("rect").transition(A).attr("opacity",0).remove(),t.selectAll(".axis > *:not(.axistext)").remove(),t.select(".axistext").text("");var S=r.domain()[1];t.select(".circles").attr("transform","translate(48,40)").attr("text-anchor","middle").selectAll("circle").data([S/10,2*S/5,S]).join("circle").attr("fill","none").attr("stroke","#ccc").transition(A).attr("cy",(function(t){return-r(t)})).attr("r",r);var w=r.copy().range([0,-2*r(S)]);t.select(".circleAxis").attr("transform","translate(48,50)").transition(A).call(Object(d.b)(w).tickSize(0).tickPadding(0).tickValues([S/10,2*S/5,S]).tickFormat((function(t){return Object(l.e)(t,"short")}))).selectAll(".tick text").style("text-anchor","middle"),t.select(".circleAxis").call((function(t){return t.select(".domain").remove()}))}else t.call((function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.svg,r=t.color,n=t.title,a=t.tickSize,i=void 0===a?6:a,c=t.width,s=void 0===c?320:c,l=t.height,O=void 0===l?44+i:l,k=t.marginTop,E=void 0===k?18:k,x=t.marginRight,y=void 0===x?0:x,A=t.marginBottom,S=void 0===A?16+i:A,w=t.marginLeft,N=void 0===w?0:w,R=t.ticks,C=void 0===R?s/64:R,I=t.tickFormat,D=t.tickValues,_=t.ordinalWeights;e.selectAll(".circles > *").remove(),e.selectAll(".circleAxis > *").remove();var B,L=e.transition().duration(o.b),M=function(t){t.selectAll(".tick line").attr("y1",E+S-O)};if(r.interpolate){var q=Math.min(r.domain().length,r.range().length);B=r.copy().rangeRound(Object(m.a)(Object(b.a)(N,s-y),q)),e.select(".ramp").attr("class","ramp").attr("x",N).attr("y",E).attr("width",s-N-y).attr("height",O-E-S).attr("preserveAspectRatio","none").attr("xlink:href",T(r.copy().domain(Object(m.a)(Object(b.a)(0,1),q))).toDataURL())}else if(r.interpolator){if(e.select(".bars").selectAll("rect").transition(L).attr("opacity",0).remove(),B=Object.assign(r.copy().interpolator(Object(v.a)(N,s-y)),{range:function(){return[N,s-y]}}),e.select(".ramp").attr("class","ramp").attr("x",N).attr("y",E).attr("width",s-N-y).attr("height",O-E-S).attr("preserveAspectRatio","none").attr("xlink:href",T(r.interpolator()).toDataURL()).transition(L).attr("opacity",1),!B.ticks){if(void 0===D){var U=Math.round(C+1);D=Object(u.a)(U).map((function(t){return Object(f.a)(r.domain(),t/(U-1))}))}"function"!==typeof I&&(I=Object(p.a)(void 0===I?",f":I))}}else if(r.invertExtent){var F=r.thresholds?r.thresholds():r.quantiles?r.quantiles():r.domain(),H=void 0===I?function(t){return t}:"string"===typeof I?Object(p.a)(I):I;B=Object(h.a)().domain([-1,r.range().length-1]).rangeRound([N,s-y]),e.append("g").selectAll("rect").data(r.range()).join("rect").attr("x",(function(t,e){return B(e-1)})).attr("y",E).attr("width",(function(t,e){return B(e)-B(e-1)})).attr("height",O-E-S).attr("fill",(function(t){return t})),D=Object(u.a)(-1,F.length),I=function(t){return-1===t?H(1):t!==F.length-1?t===F.length-2?H(F[t]+"+",t):H(F[t],t):void 0}}else{if(e.select(".ramp").transition(L).attr("opacity",0).attr("xlink:href",null),_){var V=Object(h.a)().domain([0,_.reduce((function(t,e){return t+e}))]).rangeRound([0,s-N-y]),z=_.map((function(t,e){return _.slice(0,e).reduce((function(t,e){return t+V(e)}),N)}));B=Object(g.a)().domain(r.domain()).range(z),e.select(".bars").selectAll("rect").data(r.domain()).join((function(t){return t.append("rect").attr("x",B).attr("width",(function(t,e){return V(_[e])}))})).attr("y",E).attr("height",O-E-S).attr("fill",r).transition(L).attr("x",B).attr("width",(function(t,e){return V(_[e])})).attr("opacity",1)}else B=Object(j.a)().domain(r.domain()).rangeRound([N,s-y]),e.selectAll("rect").data(r.domain()).join("rect").attr("x",B).attr("y",E).attr("width",Math.max(0,B.bandwidth()-1)).attr("height",O-E-S).attr("fill",r);M=function(){}}return e.select(".axis").attr("transform","translate(0,".concat(O-S,")")).transition(L).attr("class","axis").call(Object(d.a)(B).ticks(C,"string"===typeof I?I:void 0).tickFormat("function"===typeof I?I:void 0).tickSize(i).tickValues(D)).on("start",(function(){e.call(M).call((function(t){return t.select(".domain").remove()}))})).call((function(t){return t.select(".axistext").attr("class","axistext").attr("x",N).attr("y",E+S-O-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").text(n)})),e.node()}({svg:t,color:r,title:"".concat(a(Object(l.a)(n))," ").concat(a("cases")),width:k,height:E,ticks:5,tickFormat:function(t,r,n){if(e!==o.k.CHOROPLETH||Number.isInteger(t))return r===n.length-1?Object(l.e)(t)+"+":Object(l.e)(t)},marginLeft:2,marginRight:0})}))}),[a,y,r,e,n]),E.a.createElement("div",{className:"svg-parent maplegend",style:{height:o.g},ref:c},E.a.createElement("svg",{id:"legend",preserveAspectRatio:"xMidYMid meet",ref:i},E.a.createElement("image",{className:"ramp"}),E.a.createElement("g",{className:"bars"}),E.a.createElement("g",{className:"circles"}),E.a.createElement("g",{className:"circleAxis"}),E.a.createElement("g",{className:"axis"},E.a.createElement("text",{className:"axistext"}))),E.a.createElement("canvas",{className:"color-scale",style:{position:"absolute",height:0}}))};function T(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,r=Object(O.a)(".color-scale").node(),n=(r.width=e,r.height=1,r).getContext("2d"),a=0;a<e;++a)n.fillStyle=t(a/(e-1)),n.fillRect(a,0,1,1);return r}var A=r(88),S=r(82),w=r.n(S),N=r(171),R=r(227),C=r(233),I=r(230),D=r(178),_=r(253),B=r(221),L=r(222),M=r(223),q=r(224),U=r(225),F=r(226),H=r(132),V=r(105),z=r(5),P=r(107),Z=r(194),Y=function(t,e){return Object(l.h)(t,"total",e)};e.default=function(t){var e,r,a=this,s=t.mapCode,u=t.mapView,f=t.mapViz,d=t.data,p=(t.changeMap,t.regionHighlighted),m=t.setRegionHighlighted,b=t.statistic,v=(t.isCountryLoaded,Object(x.a)().t),h=Object(k.useRef)(null),j=o.h[s],g=Object(z.g)(),T=Object(P.a)(j.geoDataFile,function(){var t=Object(c.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.a)(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{suspense:!1,revalidateOnFocus:!1}).data,S=Object(k.useMemo)((function(){var t=Object.keys(d).filter((function(t){return"TT"!==t&&Object.keys(o.h).includes(t)}));return u===o.j.STATES?Object(N.a)(t,(function(t){return Y(d[t],b)})):Object(N.a)(t,(function(t){var e;return(null===(e=d[t])||void 0===e?void 0:e.districts)?Object(N.a)(Object.values(d[t].districts),(function(t){return Y(t,b)})):0}))}),[d,u,b]),W=Object(k.useMemo)((function(){return Y(d[s],b)}),[d,s,b]),J=Object(k.useMemo)((function(){return f===o.k.BUBBLES?Object(D.b)([0,Math.max(S,1)],[0,40]).clamp(!0).nice(3):Object(_.a)([0,Math.max(1,S)],function(t){switch(t){case"confirmed":return function(t){return Object(B.a)(.85*t)};case"active":return function(t){return Object(L.a)(.85*t)};case"recovered":return function(t){return Object(M.a)(.85*t)};case"deceased":return function(t){return Object(q.a)(.85*t)};case"tested":return function(t){return Object(U.a)(.85*t)};default:return function(t){return Object(F.a)(.85*t)}}}(b)).clamp(!0)}),[f,b,S]),G=Object(k.useMemo)((function(){return T?Object(C.a)(Object(I.a)()):null}),[T]),K=Object(k.useCallback)((function(t){var e,r,n=o.q[t.properties.ID_2],a=t.properties.ID_1,i=d[n],c=null===i||void 0===i||null===(e=i.districts)||void 0===e?void 0:e[a];return 0===(r=Y(a?c:i,b))?"#ffffff00":J(r)}),[d,J,b]),Q=Object(k.useCallback)((function(t){return o.t[b].color+t}),[b]),X=Object(k.useMemo)((function(){return T?(u===o.j.STATES?Z.a(T,T.objects.NZL_adm2).features:j.mapType===o.i.COUNTRY&&f===o.k.BUBBLES?[].concat(Object(n.a)(Z.a(T,T.objects.NZL_adm2).features),Object(n.a)(Z.a(T,T.objects.NZL_adm2).features)):Z.a(T,T.objects.NZL_adm2).features).map((function(t){var e=t.properties.ID_1,r=t.properties.ID_2,n=Object.assign({},t);return n.id="".concat(s,"-").concat(r).concat(e?"-"+e:""),n})):null}),[T,s,u,f,j]),$=Object(k.useCallback)((function(t){t.select("title").text((function(t){if(f===o.k.CHOROPLETH){var e,r,n=t.properties.ID_2,a=o.q[n],i=t.properties.ID_1,c=d[a],s=null===c||void 0===c||null===(e=c.districts)||void 0===e?void 0:e[i];return r=Y(i?s:c,b),Object(l.e)(r/(W||.001)*100)+"% from "+Object(l.l)(i||n)}}))}),[f,d,b,W]),tt=Object(k.useRef)(null);return Object(k.useEffect)((function(){Object(O.a)(h.current).attr("pointer-events","auto").on("click",(function(){tt.current=null,m({stateCode:s,districtName:null})}))}),[s,m]),Object(k.useEffect)((function(){if(T){var t=Object(O.a)(h.current),e=Object(V.a)().duration(o.b),r=t.select(".regions").selectAll("path").data(f!==o.k.BUBBLES?X:[],(function(t){return t.id})).data(X,(function(t){return t.id})).join((function(t){return t.append("path").attr("d",G).attr("stroke-width",1.8).attr("stroke-opacity",0).style("cursor","pointer").on("mouseenter",(function(t){console.log("mouse entered region: ",t.properties),m({stateCode:o.q[t.properties.ID_2],districtName:t.properties.ID_1})})).attr("fill","#fff").attr("stroke","#fff").call((function(t){t.append("title")}))}),(function(t){return t}),(function(t){return t.transition(e).attr("stroke","#fff").attr("fill","#fff").remove()})).attr("pointer-events","all").on("touchstart",(function(t){tt.current===t?tt.current=null:tt.current=t})).on("click",(function(e){var r;H.b.stopPropagation();var n=o.q[e.properties.ID_2];!tt.current&&j.mapType!==o.i.STATE&&(null===(r=d[n])||void 0===r?void 0:r.districts)&&(t.attr("pointer-events","none"),t.select(".regions").selectAll("path").attr("pointer-events","none"),g.push("/state/".concat(n).concat(window.innerWidth<769?"#MapExplorer":"")))})).call((function(t){t.transition(e).attr("fill",K).attr("stroke",Q.bind(a,""))}));window.requestIdleCallback((function(){$(r)}))}}),[f,d,X,K,T,g,j.mapType,G,$,m,Q]),Object(k.useEffect)((function(){if(X){var t=Object(O.a)(h.current),e=Object(V.a)().duration(o.b),r=[];f===o.k.BUBBLES&&(r=X.map((function(t){var e=o.q[t.properties.ID_2],r=t.properties.ID_1,n=d[e];if(u===o.j.STATES)t.value=Y(n,b);else if(u===o.j.DISTRICTS){var a,i,c=null===n||void 0===n||null===(a=n.districts)||void 0===a?void 0:a[r];t.value=Y(r?c:null===n||void 0===n||null===(i=n.districts)||void 0===i?void 0:i[o.C],b)}return t})).sort((function(t,e){return e.value-e.value}))),t.select(".circles").selectAll("circle").data(r,(function(t){return t.id})).join((function(t){return t.append("circle").attr("transform",(function(t){return"translate(".concat(G.centroid(t),")")})).attr("fill-opacity",.25).style("cursor","pointer").attr("pointer-events","all")}),(function(t){return t}),(function(t){return t.call((function(t){return t.transition(e).attr("r",0).remove()}))})).on("mouseenter",(function(t){m({stateCode:o.q[t.properties.ID_2],districtName:u===o.j.STATES?null:t.properties.district||o.C})})).on("touchstart",(function(t){tt.current===t?tt.current=null:tt.current=t})).on("click",(function(t){H.b.stopPropagation(),tt.current||j.mapType===o.i.STATE||g.push("/state/".concat(o.q[t.properties.ID_2]).concat(window.innerWidth<769?"#MapExplorer":""))})).transition(e).attr("fill",o.t[b].color+"70").attr("stroke",o.t[b].color+"70").attr("r",(function(t){return J(t.value)}))}}),[j.mapType,f,u,d,X,g,J,G,m,b]),Object(k.useEffect)((function(){if(T){var t=Object(O.a)(h.current),e=Object(V.a)().duration(o.b),r=[],n=[];j.mapType===o.i.COUNTRY&&((r=[Z.b(T,T.objects.NZL_adm2)])[0].id="".concat(s,"-states")),(j.mapType===o.i.STATE||u===o.j.DISTRICTS&&f===o.k.CHOROPLETH)&&((n=[Z.b(T,T.objects.NZL_adm2)])[0].id="".concat(s,"-districts")),t.select(".state-borders").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(r,(function(t){return t.id})).join((function(t){return t.append("path").attr("d",G).attr("stroke","#fff0")}),(function(t){return t}),(function(t){return t.transition(e).attr("stroke","#fff0").remove()})).transition(e).attr("stroke",Q.bind(a,"40")),t.select(".district-borders").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(n,(function(t){return t.id})).join((function(t){return t.append("path").attr("d",G).attr("d",G).attr("stroke","#fff0")}),(function(t){return t}),(function(t){return t.transition(e).attr("stroke","#fff0").remove()})).transition(e).attr("stroke",Q.bind(a,"40"))}}),[T,j,s,f,u,b,G,Q]),Object(k.useEffect)((function(){var t=p.stateCode,e=o.s[t],r=p.districtName,n=Object(O.a)(h.current);f===o.k.BUBBLES?n.select(".circles").selectAll("circle").attr("fill-opacity",(function(n){var a;return e===n.properties.ID_2&&(!r&&t!==s||r===(null===(a=n.properties)||void 0===a?void 0:a.ID_1)||u===o.j.STATES||r===o.C&&!n.properties.ID_1)?1:.25})):n.select(".regions").selectAll("path").each((function(n){var a,i=e===n.properties.ID_2&&(!r&&t!==s||r===(null===(a=n.properties)||void 0===a?void 0:a.ID_1)||u===o.j.STATES);i&&this.parentNode.appendChild(this),Object(O.a)(this).attr("stroke-opacity",i?1:0)}))}),[T,d,s,u,f,p.stateCode,p.districtName,b]),E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"svg-parent"},E.a.createElement("svg",{id:"chart",viewBox:"0 0 ".concat(432," ").concat(488),preserveAspectRatio:"xMidYMid meet",ref:h},E.a.createElement("g",{className:"regions"}),E.a.createElement("g",{className:"state-borders"}),E.a.createElement("g",{className:"district-borders"}),E.a.createElement("g",{className:"circles"})),j.mapType===o.i.STATE&&!!Y(null===(e=d[s])||void 0===e||null===(r=e.districts)||void 0===r?void 0:r[o.C],b)&&E.a.createElement("div",{className:w()("disclaimer","is-".concat(b))},E.a.createElement(A.a,null),E.a.createElement("span",null,v("District-wise data not available in state bulletin")))),J&&E.a.createElement(y,{data:d,mapViz:f,mapScale:J,statistic:b}),E.a.createElement("svg",{style:{position:"absolute",height:0}},E.a.createElement("defs",null,E.a.createElement("filter",{id:"balance-color",colorInterpolationFilters:"sRGB"},E.a.createElement("feColorMatrix",{type:"matrix",values:"0.91372549  0           0            0  0.08627451 0           0.91372549  0            0  0.08627451 0           0           0.854901961  0  0.145098039 0           0           0            1  0"})))))}}}]);
//# sourceMappingURL=23.be7e9861.chunk.js.map